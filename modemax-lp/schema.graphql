type MarketToken @entity(immutable: true) {
  # token address
  id: ID!
}
type UserLiquidity @entity {
  # account
  id: ID!
  lp: BigInt!
  basePoints: BigInt!
  latesUpdateTimestamp: Int!
  snap: [UserLiquiditySnap!] @derivedFrom(field: "account")
}

type UserLiquiditySnap @entity(immutable: true) {
  # account:timestamp
  id: ID!
  account: UserLiquidity!
  timestamp: Int!
  lp: BigInt!
  basePoints: BigInt!
}

type UserStat @entity {
  # account
  id: ID!
  lp: BigDecimal!
  swap: BigDecimal!
  trade: BigDecimal!
  referral: BigDecimal!
}

type ReferralCode @entity {
  id: ID!
  code: String!
  owner: String!
  traders: [TraderToReferralCode!]! @derivedFrom(field: "referralCode")
  traderLatestIndex: Int!
}

type TraderToReferralCode @entity {
  id: ID!
  referralCode: ReferralCode!
  index: Int!
  timestamp: Int!
}
